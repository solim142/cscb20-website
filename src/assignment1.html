<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSCB20H3</title>
    <link rel="stylesheet" href="index.css">
</head>
<body>
    
    <!-- Created a navbar that should hopefully stick to the top of page and can reuse, so feel free to copy-paste -->
    <div class="navbar">
        <a href="index.html">Home</a>
        <a href="syllabus.html">Syllabus</a>
        <div class="dropdown">
            <a href="assignments.html" id="currentPage">Assignments</a>
            <div class="dropdown-content"> <!-- Using adaptation from https://www.w3schools.com/css/css_dropdowns.asp -->
                <a href="assignment1.html">Assignment 1</a>
                <a href="assignment2.html">Assignment 2</a>
                <a href="assignment3.html">Assignment 3</a> <!-- Assignment 3 not posted, so can't add link. -->
            </div>
        </div>
        <a href="labs.html">Labs</a>
        <a href="files/Week 0 Lecture Notes-1.pdf">Lecture Notes</a>
        <a href="https://piazza.com/class/m5fmz9kzjo83yk">Piazza</a>
        <a href="https://markus2.utsc.utoronto.ca/">MarkUs</a>
        <a href="feedback.html">Feedback</a>
        <a href="team.html">Course Team</a>
    </div>

    <!-- Menu only for "mobile" aspect ratios -->
    <div class="navbarMobile">

        <img src="files/Hamburger_icon_lightmode.png" alt="menu" width="50px" height="50px">
        <div class="navbarMobileRight">
            <p><b>Assignment 1</b></p>
        </div>

        <div class="navbarMobileMenu">
            <a href="index.html"><b>Home</b></a>
            <a href="syllabus.html"><b>Syllabus</b></a>
            <a href="assignments.html"><b>Assignments</b></a>
            <a href="labs.html"><b>Labs</b></a>
            <a href="files/Week 0 Lecture Notes-1.pdf"><b>Lecture Notes</b></a>
            <a href="https://piazza.com/class/m5fmz9kzjo83yk"><b>Piazza</b></a>
            <a href="https://markus2.utsc.utoronto.ca/"><b>MarkUs</b></a>
            <a href="feedback.html"><b>Feedback</b></a>
            <a href="team.html"><b>Course Team</b></a>
        </div>

    </div>

    <div class="content">
        <h1>Assignments 1: SmartCity Initiative</h1>

        <div class="line"></div>

        <p><span class="boldBlue">Due:</span> Feb11 at 11:59 PM</p>
        <p><span class="boldBlue">Weight:</span> 8%</p>
        <p><span class="boldBlue">Comments: </span>Updated Feb 7</p>

        <div class="line"></div>

        <h2>Context</h2>
        <p>In this assignment, you are a Data Analyst Intern for the SmartCity Initiative Team. The team is working on projects for Urban Connect 2.0, a next-generation smart city infrastructure system. Your supervisor has outlined some schemas and queries that need to be completed using relational algebra (RA) and SQL.</p>

        <h2>Instructions & Important Notes</h2>

        <h3>Group Work</h3>
        <ul>
            <li><span class="boldBlue">Group Size: </span>You must work in a group of <b>two or three</b>.</li>
            <li><span class="boldBlue">Group Declaration: </span>Ensure all group members are declared in MarkUs before submission</li>
        </ul>

        <h3>Relational Algebra</h3>
        <ul>
            <li>Type (do not handwrite) your RA queries in A1.txt</li>
            <li>Use the relational algebra notation taught in class. These notations should work on <a href="https://dbis-uibk.github.io/relax/calc/local/uibk/local/0">Relax</a> to an external site. where your solutions will be run. If your solutions do not run on <a href="https://dbis-uibk.github.io/relax/calc/local/uibk/local/0">Relax</a> to an external site., you will receive a 0.</li>
            <li>Each query should include a comment that states the question.</li>
            <li>If a query cannot be expressed in RA, write "Cannot be done in RA" and explain why.</li>
            <li>Break down complex queries into smaller queries and assign those to a variable. The names of the variables should be appropriate. Provide explanations for complex RA queries to help the TAs understand your solution.</li>
            <li>Example: Given relations <span class="textCodeHighlight">Student, Courses, Enrollments</span> consider the following task:</li>
        </ul>

        <p><span class="boldBlue">Task:</span> Find the names of all students enrolled in courses with more than 3 credits.</p>
        <p><i>Step-by-Step Relational Algebra Query:</i></p>
        <p>Extract courses with more than 3 credits:</p>
        <p><span class="textCodeHighlight">HighCreditCourses = σ credits > 3 (Courses)</span></p>
        <p>Join students with courses they are enrolled in:</p>
        <p><span class="textCodeHighlight">StudentCourseJoin = Students ⨝ Enrollments</span></p>
        <p>Join the result with high-credit courses:</p>
        <p><span class="textCodeHighlight">HighCreditEnrollments = StudentCourseJoin ⨝ HighCreditCourses</span></p>
        <p>Project only student names:</p>
        <p><span class="textCodeHighlight">π name (HighCreditEnrollments)</span></p>

        <h3>SQL:</h3>
        <ul>
            <li>Save your SQL queries in a file named A1.sql.</li>
            <li>Create tables that match the defined schemas.</li>
            <li>Ensure your SQL queries compile and execute correctly on SQLite. Queries that fail to run will receive a mark of 0.</li>
            <li>If you define any views for a question (you are encouraged to), you must drop them.</li>
            <li>Each query should include a comment that states the question.</li>
            <li>SQL queries must return results matching the provided test data to earn full marks.</li>
        </ul>

        <h3>Remaining Questions:</h3>
        <ul><li>Save your answers to questions 1, 4, 5, and 6 in a PDF file named A1.pdf.</li></ul>

        <h3>Acknowledgment Statement:</h3>
        <p>Each group must include a paragraph in the A1.pdf file that:</p>
        <ol>
            <li>Clearly states who worked on which parts of the assignment.</li>
            <li>Confirms that all work was completed by the group members without external help. <br> Example: <br> <i>"We, [Student 1 Name] , [Student 2 Name]and [Student 3 Name], confirm that all parts of this assignment were completed collaboratively and without external assistance. [Student 1 Name] was primarily responsible for questions X and Y, while [Student 2 Name] focused on questions Z and W and [Student 3 Name] focused on questions P and Q. We shared responsibilities for testing and proofreading."</i> </li>
        </ol>

        <h3>Submission Guidelines:</h3>
        <ul>
            <li>
                <p>Testing Requirements</p>
                <ul>
                    <li>Test all Relational Algebra solutions on ReLax.</li>
                    <li>Test all SQL solutions on SQLite.</li>
                </ul>
            </li>
            <li>
                <p>No Schema Submission:</p>
                <ul>
                    <li>Do not submit the schema. The provided schema will be used to test your solutions.</li>
                </ul>
            </li>
            <li>Handwritten Solutions: Will not be marked.</li>
            <li>
                <p>File Submission: Submit the following three files:</p>
                <ul>
                    <li>A1.pdf: Contains Q1, Q4, Q5, Q6, and  acknowledgement statement.</li>
                    <li>A1.txt: Contains all RA queries (Q2).</li>
                    <li>A1.sql: Contains all SQL queries (Q3).</li>
                </ul>
            </li>
            <li>
                <p>Late Submissions:</p>
                <ul><li>Late submissions will incur a penalty of 10% per day, up to 3 days past the deadline.</li></ul>
            </li>
        </ul>

        <h3>Schema Definitions</h3>

        <ol>
            <li>
                <p><b>Buildings (building_id: integer, name: string, address: string, city: string, height: real)</b> <br>A tuple in this relation represents a building in the city.</p>
            </li>
            <li>
                <p><b>Rooms (room_id: integer, building_id: integer, floor: integer, capacity: integer)</b> <br>A tuple in this relation represents a room in a specific building.</p>
            </li>
            <li>
                <p><b>Sensors (sensor_id: integer, room_id: integer, type: string, status: string)</b><br>A tuple in this relation represents a sensor installed in a room.</p>
            </li>
            <li>
                <p><b>Readings (reading_id: integer, sensor_id: integer, timestamp: text, value: real, reading_month:number)</b><br>A tuple in this relation represents a reading from a specific sensor.</p>
            </li>
            <li>
                <p><b>Maintenance (maintenance_id: integer, building_id: integer, date: text, description: string, maintenance_month:number)</b><br>A tuple in this relation represents a maintenance event for a building.</p>
            </li>
            <li>
                <p><b>Suppliers (supplier_id: integer, name: string, city: string)</b><br>A tuple in this relation represents a supplier.</p>
            </li>
            <li>
                <p><b>Supplies (supply_id: integer, supplier_id: integer, building_id: integer, cost: real)</b><br>A tuple in this relation represents resources supplied to a building by a supplier.</p>
            </li>
            <li>
                <p><b>Tasks (task_id: integer, building_id: integer, task_type: string, priority: string)</b><br>A tuple in this relation represents a task assigned to a building.</p>
            </li>
            <li>
                <p><b>Personnel (person_id: integer, name: string, role: string, contact: string)</b><br>A tuple in this relation represents personnel responsible for maintenance tasks.</p>
            </li>
            <li>
                <p><b>PersonnelAssignment (person_id: integer, maintenance_id: integer)</b><br>A tuple in this relation assigns personnel to specific maintenance events.</p>
            </li>
        </ol>

        <h2>Questions</h2>
        
        <h3>Q1. Convert to English (10 points)</h3>
        <p>Explain the following relational algebra queries in plain English. Be precise in your wording and include terms like "all," "every," or "at least one" where appropriate. If a query cannot be expressed, clearly state the reason:</p>
        <ol>
            <li><img src="files/A1files/Screen Shot 2025-01-27 at 2.42.29 PM.png" alt="Question 1" class="A1img"></li>
            <li><img src="files/A1files/Screen Shot 2025-01-27 at 2.43.07 PM.png" alt="Question 2" class="A1img"></li>
            <li><img src="files/A1files/Screen Shot 2025-01-27 at 2.44.16 PM.png" alt="Question 3" class="A1img"></li>
            <li><img src="files/A1files/Screen Shot 2025-01-27 at 2.47.14 PM.png" alt="Question 4" class="A1img"></li>
            <li><img src="files/A1files/Screen Shot 2025-01-27 at 2.47.53 PM.png" alt="Question 5" class="A1img"></li>
            <li><img src="files/A1files/Screen Shot 2025-01-27 at 2.48.43 PM.png" alt="Question 6" class="A1img"></li>
            <li><img src="files/A1files/Screen Shot 2025-01-27 at 2.49.15 PM.png" alt="Question 7" class="A1img"></li>
            <li><img src="files/A1files/Screen Shot 2025-01-27 at 2.50.01 PM.png" alt="Question 8" class="A1img"></li>
            <li><img src="files/A1files/Screen Shot 2025-01-27 at 2.52.22 PM.png" alt="Question 9" class="A1img"></li>
            <li><img src="files/A1files/Screen Shot 2025-01-27 at 2.52.22 PM.png" alt="Question 10" class="A1img"></li>
        </ol>
    
        <h3>Q2. Relational Algebra Queries (36 points)</h3>
        <p>Provide relational algebra queries for the following tasks:</p>
        <p>If a task cannot be expressed in relational algebra, write "Cannot be done in RA" and justify why.</p>
        <ol>
            <li>Retrieve the names of buildings that have at least one active sensor.</li>
            <li>Retrieve the IDs of buildings with rooms on every floor between 1 and 10 inclusive.</li>
            <li>Retrieve the IDs of buildings with tasks of all priority levels (Assume there are three priority levels: High, Medium, Low).</li>
            <li>Assume there are three buildings with IDs 1, 2, and 3 among other buildings. Find the names of buildings out of the three where every room has at least one sensor installed.</li>
            <li>Retrieve the IDs of suppliers providing resources to every building in Toronto.</li>
            <li>Retrieve the names of suppliers who supply resources to all buildings that have high-priority tasks assigned.</li>
            <li>Retrieve all rooms that have at least two sensors of different types installed.</li>
            <li>Find all buildings that have both inactive sensors and a scheduled maintenance event in the same month.</li>
            <li>Retrieve the IDs of rooms in Toronto where the total capacity of two rooms exceeds 500. Each pair should have unique rooms.</li>
            <li>Retrieve the ID of the tallest building such that sensors installed in rooms on every floor. Assume there is only one tallest building.</li>
            <li>Find the names of personnel responsible for maintenance tasks in buildings where resources were supplied by suppliers located in the same city, and the building has at least one high-priority task assigned.</li>
            <li>Retrieve the IDs of buildings where at least one sensor has recorded a reading above 75 after 23rd October 2024, the buildings have had maintenance tasks in the same period, and they received supplies from suppliers located in a different city.</li>
        </ol>

        <h3>Q3. SQL Queries (36 points)</h3>
        <p>For each part in Q2, write the corresponding SQL query. Ensure that:</p>
        <ul>
            <li>The schema matches the one provided above.</li>
            <li>Your queries execute correctly in SQLite.</li>
        </ul>
        <p>Save all your RA queries in a file named A1.txt and all SQL queries in a file named A1.sql.</p>

        <h3>Q4. Primary Key and Foreign Key Relationships (5 points)</h3>
        <p>Identify the primary key and foreign key relationships for each schema defined above.</p>

        <h3>Q5. Revise the Schema (2 points)</h3>
        <p>In your opinion, this database schema is bad. Show off your skills to the manager and rewrite the schema. There are no right or wrong answers. Marks are based on the quality of answers, and any theories, guidelines or practices you’ve incorporated. Feel free to take some time to research the topic but remember to cite your sources.</p>
        <p>Provide:</p>
        <ol>
            <li>The revised schema.</li>
            <li>Reasons for your decisions.</li>
        </ol>
        
        <h3>Q6. Bonus (1 point)</h3>
        <p>Create a funny meme or short story about your interaction with the smart city manager. If it makes the TA grin, you'll get the bonus mark!</p>

        <h3>Styling marks (5 points)</h3>
        <p>Styling of your submission will be evaluated and carries 4 points.</p>
    </div>
    
</body>
<footer>
    <img class="footerLogo" src="files/utsc_logo.jpg"/>
    <div class="footerLinks">
        <p style="font-size: 12px; color: #96A1B7;">IMPORTANT LINKS</p>
        <a href="https://www.utsc.utoronto.ca/cms/computer-science" class="footerLink">UTSC Computer Science Faculty</a>
        <a href="https://jobs.utoronto.ca" class="footerLink">Careers @UofT</a>
        <p style="font-size: 8px; color: #96A1B7">Site designed by Daniel Weihs Sarabia, Lucas Soliman, and Tahira Tasneem</p>
    </div>
    <button class="DarkmodeButton">
        <p>Turn <b>ON</b> <br> Dark Mode</p>
    </button>
</footer>
</html>